<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Your Trip</title>

    <style>
      body {
        margin: 0;
        font-family: Arial;
        background: #f4f6fb;
      }

      h1 {
        text-align: center;
        padding: 22px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        margin: 0;
      }

      .form-container {
        max-width: 900px;
        margin: 40px auto;
        background: white;
        padding: 40px;
        border-radius: 14px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      }

      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 35px 45px;
      }
      .form-grid > div {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 10px;
      }
      label {
        font-weight: bold;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 14px 16px;
        border-radius: 10px;
        border: 1px solid #dcdcdc;
        font-size: 15px;
        background: #fafafa;
        margin-top: 6px;
        transition: 0.3s;
      }

      textarea {
        min-height: 100px;
      }

      button {
        margin-top: 20px;
        width: 100%;
        padding: 14px;
        background: #1565c0;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }


      #addTravellersBtn {
        margin-top: 35px;
        margin-bottom: 25px;
        padding: 16px;
        font-size: 16px;
      }
      #travellersContainer {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
.traveller-grid{
display:grid;
grid-template-columns: 2.5fr 1fr 1.2fr;
gap:18px;
margin-top:15px;
align-items:center;
}
.traveller-grid input,
.traveller-grid select{
width:100%;
padding:14px;
border-radius:10px;
border:1px solid #dcdcdc;
background:#fff;
font-size:15px;
height:48px;
box-sizing:border-box;
transition:0.3s;
}
.traveller-grid input:focus,
.traveller-grid select:focus{
outline:none;
border-color:#667eea;
box-shadow:0 0 6px rgba(102,126,234,0.25);
}
    
.traveller-card{
background:#ffffff;
padding:25px;
margin-top:25px;
border-radius:14px;
border-left:5px solid #667eea;
}
.traveller-card h3{
margin:0;
margin-bottom:10px;
color:#333;
font-size:18px;
}
      label {
        margin-top: 10px;
      }

      .price-box {
        background: #eef2ff;
        padding: 15px;
        margin-top: 20px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: bold;
        text-align: center;
      }

      @media (max-width: 768px) {
        .form-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>

  <body>
    <h1>Book Your Dream Trip</h1>

    <div class="form-container">
      <form id="bookingForm">
        <div class="form-grid">
          <div>
            <label for="customerName">Name</label>
            <input id="customerName" />
          </div>

          <div>
            <label for="email">Email</label>
            <input id="email" type="email" required />
          </div>

          <div>
            <label for="mobile">Mobile</label>
            <input id="mobile" required />
          </div>

          <div>
            <label for="packageName">Select Package</label>
            <select id="packageName">
              <option>Goa Trip</option>
              <option>Manali Tour</option>
              <option>Mumbai Explorer</option>
              <option>Kerala Backwaters</option>
              <option>Shimla Retreat</option>
              <option>Darjeeling Delight</option>
              <option>Andaman Escape</option>
              <option>Pondicherry Relax</option>
              <option>Jaipur Heritage</option>
              <option>Hyderabad City Tour</option>
              <option>Ladakh Adventure</option>
              <option>Coorg Nature Stay</option>
              <option>Mysore Palace Tour</option>
              <option>Rishikesh River Camp</option>
              <option>Varanasi Spiritual Trip</option>
              <option>Udaipur Lake View</option>
              <option>Sikkim Snow Journey</option>
              <option>Meghalaya Explorer</option>
              <option>Manali Tour</option>
              <option>Mumbai Explorer</option>
            </select>
          </div>

          <div>
            <label for="departureDate">Departure Date</label>
            <input type="date" id="departureDate" required />
          </div>

          <div>
            <label for="arrivalDate">Arrival Date</label>
            <input type="date" id="arrivalDate" required />
          </div>

          <div>
            <label for="adults">Adults</label>
            <input type="number" id="adults" value="1" min="1" />
          </div>

          <div>
            <label for="children">Children</label>
            <input type="number" id="children" value="0" min="0" />
          </div>
        </div>

        <button type="button" id="addTravellersBtn">
           Add Traveller Details
        </button>

        <div id="travellersContainer"></div>

        <label for="pickup">Pickup Location</label>
        <input id="pickup" />

        <label for="request">Special Request</label>
        <textarea id="request"></textarea>

        <div class="price-box">
          Total Amount â‚¹ <span id="totalPrice">0</span>
        </div>

        <button type="submit">Continue to Summary</button>
      </form>
    </div>

    <script>

      const priceList = {
        "Goa Trip": 15000,
        "Manali Tour": 35000,
        "Mumbai Explorer": 25000,
        "Kerala Backwaters": 38000,
        "Ooty Hills": 22000,
        "Kashmir Paradise": 45000,
        "Shimla Retreat": 32000,
        "Darjeeling Delight": 34000,
        "Andaman Escape": 41000,
        "Pondicherry Relax": 17000,
        "Jaipur Heritage": 21000,
        "Hyderabad City Tour": 16000,
        "Ladakh Adventure": 55000,
        "Coorg Nature Stay": 28000,
        "Mysore Palace Tour": 19000,
        "Rishikesh River Camp": 24000,
        "Varanasi Spiritual Trip": 20000,
        "Udaipur Lake View": 30000,
        "Sikkim Snow Journey": 42000,
        "Meghalaya Explorer": 39000,
      };

      const pkg = document.getElementById("packageName");
      const adults = document.getElementById("adults");
      const children = document.getElementById("children");
      const totalPrice = document.getElementById("totalPrice");

      function calculatePrice() {
        const price = priceList[pkg.value] || 0;
        const members =
          (Number(adults.value) || 0) + (Number(children.value) || 0);

        totalPrice.textContent = price * members;
      }

      pkg.onchange = calculatePrice;
      adults.oninput = calculatePrice;
      children.oninput = calculatePrice;

      calculatePrice();


      document
        .getElementById("addTravellersBtn")
        .addEventListener("click", function () {
          const container = document.getElementById("travellersContainer");

          container.innerHTML = "";

          const adultCount = parseInt(adults.value) || 0;
          const childCount = parseInt(children.value) || 0;

          for (let i = 1; i <= adultCount; i++) {
          container.innerHTML += `
<div class="traveller-card">
<h3>Adult ${i}</h3>
<div class="traveller-grid">
<input class="adultName" placeholder="Full Name">
<input class="adultAge" type="number" placeholder="Age">
<select class="adultGender">
<option>Male</option>
<option>Female</option>
<option>Other</option>
</select>
</div>
</div>`;
          }

          for (let i = 1; i <= childCount; i++) {
            container.innerHTML += `
<div class="traveller-card">
<h3>Child ${i}</h3>
<div class="traveller-grid">
<input class="childName" placeholder="Name">
<input class="childAge" type="number" placeholder="Age">
<select class="childGender">
<option>Male</option>
<option>Female</option>
<option>Other</option>
</select>
</div>
</div>`;
          }
        });


      document
        .getElementById("bookingForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const currentUser = localStorage.getItem("currentUser");

          if (!currentUser) {
            alert("Login First");
            return;
          }

          const travellerDetails = [];

          document.querySelectorAll(".adultName").forEach((name, index) => {
            travellerDetails.push({
              type: "Adult",
              name: name.value,
              age: document.querySelectorAll(".adultAge")[index].value,
              gender: document.querySelectorAll(".adultGender")[index].value,
            });
          });

          document.querySelectorAll(".childName").forEach((name, index) => {
            travellerDetails.push({
              type: "Child",
              name: name.value,
              age: document.querySelectorAll(".childAge")[index].value,
            });
          });

          const bookingData = {
            package: pkg.value,
            name: customerName.value,
            email: currentUser,
            departureDate: departureDate.value,
            arrivalDate: arrivalDate.value,
            members: travellerDetails.length,
            travellers: travellerDetails,
            price: priceList[pkg.value],
            payment: "Pending",
          };

          localStorage.setItem("currentBooking", JSON.stringify(bookingData));

          window.location.href = "summary.html";
        });
        const selectedPackage =
JSON.parse(localStorage.getItem("selectedPackage"));

if(selectedPackage){

document.getElementById("packageName").value =
selectedPackage.name;

}
    </script>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>QuestVoyage Packages</title>

<style>

body
{
margin:0;
font-family:Arial;
background:#f4f6fb;
}

h1{
text-align:center;
padding:20px;
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
margin:0;
}

.filter-box{
display:flex;
gap:15px;
padding:20px;
justify-content:center;
background:white;
flex-wrap:wrap;
}

.filter-box select,
.filter-box button{
padding:10px;
border-radius:6px;
border:1px solid #ccc;
cursor:pointer;
}

.container{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:20px;
padding:30px;
}

.card{
background:white;
padding:18px;
border-radius:10px;
box-shadow:0 3px 10px rgba(0,0,0,0.1);
transition:.3s;
}

.card:hover{
transform:translateY(-5px);
}

.price{
color:green;
font-weight:bold;
}

.button-group{
margin-top:12px;
display:flex;
gap:10px;
}

.wishlist-btn{
background:#ff9800;
color:white;
border:none;
padding:8px 12px;
border-radius:6px;
cursor:pointer;
}

.book-btn{
background:#4caf50;
color:white;
border:none;
padding:8px 12px;
border-radius:6px;
cursor:pointer;
}

</style>
</head>

<body>

<h1>QuestVoyage Packages</h1>

<div class="filter-box">
<select id="priceFilter"  aria-label="Price Filter">
<option value="all">All Prices</option>
<option value="low">Below 20000</option>
<option value="mid">20000–40000</option>
<option value="high">Above 40000</option>
</select>

<select id="typeFilter"  aria-label="Type Filter">
<option value="all">All Types</option>
<option value="beach">Beach</option>
<option value="mountain">Mountain</option>
<option value="city">City</option>
</select>

<select id="durationFilter"  aria-label="Duration Filter">
<option value="all">All Duration</option>
<option value="Above 2 days">2 Days</option>
<option value="Above 5 days">3-5 Days</option>
<option value="Above 7 days and below 10 days">7-10 Days</option>
</select>

<button onclick="filterPackages()">Apply Filter</button>

</div>

<div id="packageContainer" class="container"></div>

<script>

let packages = [];


fetch("../packages.json")
.then(res => res.json())
.then(data=>{
packages = data;
displayPackages(packages);
})
.catch(err=>{
console.log("JSON NOT LOADED",err);
});


function displayPackages(data){

const container =
document.getElementById("packageContainer");

container.innerHTML="";

data.forEach(pkg=>{

container.innerHTML += `
<div class="card">

<h3>${pkg.name}</h3>
<p class="price">₹${pkg.price}</p>
<p>${pkg.type}</p>
<p>${pkg.duration} Days</p>

<div class="button-group">

<button class="wishlist-btn"
onclick="addToWishlist(${pkg.id})">
 Wishlist
</button>

<button class="book-btn"
onclick="bookPackage(${pkg.id})">
Book
</button>

</div>

</div>`;
});
}


function filterPackages(){

const price =
document.getElementById("priceFilter").value;

const type =
document.getElementById("typeFilter").value;

const duration =
document.getElementById("durationFilter").value;
const filtered =
packages.filter(pkg=>{

let priceMatch =
price==="all" ||
(price==="low" && pkg.price<20000) || 
(price==="mid" && pkg.price<=40000 && pkg.price>=20000) ||
(price==="high" && pkg.price>40000);

let typeMatch =
type==="all" ||
pkg.type.toLowerCase()===type;

let durationMatch =
price==="all" ||
(price==="low" && pkg.duration<=2) || 
(price==="mid" && pkg.duration<=5 && pkg.duration>=3) ||
(price==="high" && pkg.duration>5);

return priceMatch && typeMatch && durationMatch;

});

displayPackages(filtered);
}


function addToWishlist(id){

const currentUser =
localStorage.getItem("currentUser");

if(!currentUser){
alert("Login First");
return;
}

const pkg =
packages.find(p => p.id === id);

if(!pkg){
alert("Package not found");
return;
}

let wishlist =
JSON.parse(
localStorage.getItem(
"wishlist_" + currentUser
)
) || [];

if(wishlist.some(item => item.id === id)){
alert("Already in Wishlist");
return;
}

wishlist.push(pkg);

localStorage.setItem(
"wishlist_" + currentUser,
JSON.stringify(wishlist)
);

console.log("Saved Wishlist:", wishlist);

alert("Added to Wishlist ");
}

function bookPackage(id){

const selectedPackage =
packages.find(p => p.id === id);

localStorage.setItem(
"selectedPackage",
JSON.stringify(selectedPackage)
);

window.location.href = "book.html";
}


</script>

</body>
</html>